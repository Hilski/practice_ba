@startuml

!include https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Container.puml

System_Boundary(seller_system, "Подсистема продавцов") {

  Container(web, "Seller Web App", "React", "Интерфейс для продавца")
  Container(api, "Seller API", "Spring Boot", "REST API для операций продавцов")
  Container(order, "Order Service", "Spring Boot", "Обработка заказов")
  Container(auth, "Auth Service", "Keycloak / OAuth2", "Аутентификация и авторизация")
  Container(moderation, "Moderation Service", "Spring Boot", "Проверка карточек и продавцов")
 
  Container(db, "PostgreSQL", "База данных", "Хранение данных продавцов, товаров, заказов")
  Container(kafka, "Kafka", "Сообщения", "Асинхронная коммуникация и событийность")

}

Person(seller, "Продавец")
Person(admin, "Администратор")

seller --> web : HTTP/HTTPS
web --> api : REST
api --> auth : Проверка токенов
api --> db : CRUD-запросы

' Kafka взаимодействия
api --> kafka : Публикация событий (ProductCreated, OrderCreated, SellerUpdated)
moderation --> kafka : Чтение событий (ProductCreated, SellerUpdated)
moderation --> db : Проверка продавцов/товаров
order --> kafka : Чтение событий (OrderCreated, OrderStatusChanged)
order --> db : Хранение заказов

admin --> moderation : Интерфейс модерации

@enduml